# Docker and Kubernetes: The Complete Guide
## Dockerizing a Simple Web App

## Table of Contents:
1. [Base Image Issues](#BaseImage)
2. [Missing Files](#MissingFiles)

## Base Image Issues <a name="BaseImage"></a>

- The commands we use for building and starting the node web app are `npm install` for installing dependencies and `npm start` for starting the node server.
- Alpine as a base image is not useful here because it does not have node and npm installed.
- To get the right base image, go to https://hub.docker.com/ where we find the node image.
- We use the alpine tag for node base image because its small, compact and has the node program we require.
- Now if we try to build the image, it gives an error because the files for node setup are not in the container.

```
# Specify a base image
FROM node:alpine

# Install some dependencies
RUN npm install

# Default command
CMD ["npm", "start"]
```

## Missing Files <a name="MissingFiles"></a>

- When npm install command was run, it tried to find package.json, but the file was not found.
- In the below image, we see that there is no package.json file in the hard drive segment inside the container and so npm install command cannot find it.
![Visual Image](./Images/visualImage4.png)
- The node files are stored on our local machine outside the container by default. (Segmented off)
- We need to make sure that index.js and package.json files are available inside the container when npm install is run.
- `COPY ./ ./` We use this command to copy the files from the first specified path (Path to folder on local file system) to ./ which is inside the container.
- Path to folder to copy from is relative to build context.
- We ensure that package.json is available before npm install is called so remember ORDER OF COMMANDS MATTERS.

```
# Specify a base image
FROM node:alpine

# Install some dependencies
COPY ./ ./
RUN npm install

# Default command
CMD ["npm", "start"]
```
- Now we can build the image by running `docker build -t <docker_id>/simpleweb .`.
- Now we can create containers of the image, but when we open http://localhost:8080/ it does not display what we want.
